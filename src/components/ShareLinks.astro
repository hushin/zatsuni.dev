---
import socialIcons from "@assets/socialIcons";

export interface Props {
  title: string;
  variant?: "ghost" | "outline" | "solid";
}

const { title, variant = "ghost" } = Astro.props;

const url = encodeURIComponent(Astro.url.href);
const encodedTitle = encodeURIComponent(title);

const variantClasses = {
  ghost: "btn-ghost",
  outline: "btn-outline",
  solid: "",
};

const shareLinks = [
  {
    name: "X",
    href: "https://x.com/intent/post?url=(url)&text=(title)",
    linkTitle: `Tweet this post`,
  },
  {
    name: "Bluesky",
    href: "https://bsky.app/intent/compose?text=(title)%0A(url)",
    linkTitle: `Share this post on Bluesky`,
  },
  {
    name: "Hatebu",
    href: "https://b.hatena.ne.jp/add?mode=confirm&url=(url)&title=(title)",
    linkTitle: `このエントリーをはてなブックマークに追加`,
  },
  {
    name: "Pocket",
    href: "https://getpocket.com/edit?url=(url)",
    linkTitle: `このエントリーをPocketに追加`,
  },
  {
    name: "Facebook",
    href: "https://www.facebook.com/sharer.php?u=(url)",
    linkTitle: `Share this post on Facebook`,
  },
  {
    name: "Pinterest",
    href: "https://pinterest.com/pin/create/button/?url=(url)",
    linkTitle: `Share this post on Pinterest`,
  },
] as const;
---

<div class="flex items-center gap-3">
  <span class="text-base-content text-sm">この記事をシェアする</span>
  <div class="flex flex-wrap justify-center gap-2">
    {
      shareLinks.map(social => (
        <a
          href={social.href
            .replace("(url)", url)
            .replace("(title)", encodedTitle)}
          target="_blank"
          rel="noopener noreferrer"
          class={`btn btn-circle btn-sm ${variantClasses[variant]} group transition-transform hover:scale-110`}
          aria-label={social.linkTitle}
          title={social.linkTitle}
        >
          <div
            class="flex h-5 w-5 items-center justify-center [&>svg]:h-full [&>svg]:w-full"
            set:html={socialIcons[social.name]}
          />
          <span class="sr-only">{social.linkTitle}</span>
        </a>
      ))
    }
  </div>
</div>
