---
import { getCollection } from "astro:content";
import BaseLayout from "../../layouts/BaseLayout.astro";
import BaseHead from "../../components/BaseHead.astro";
import PostsByYear from "../../components/PostsByYear.astro";
import getSortedPosts from "../../utils/getSortedPosts";
import { SITE } from "../../config";

// 記事を取得してソート（下書きとスケジュール投稿は除外）
const allPosts = getSortedPosts(await getCollection("blog"));

// ページタイトルとメタ情報
const pageTitle = "記事一覧";
---

<BaseLayout>
  <BaseHead slot="head" title={pageTitle} />
  <div class="container mx-auto max-w-4xl px-4 py-8">
    <h1 class="text-base-content mb-2 pb-4 text-3xl font-bold">記事一覧</h1>

    <PostsByYear posts={allPosts} />
  </div>
</BaseLayout>
